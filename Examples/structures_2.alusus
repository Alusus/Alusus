import "common.alusus";

def Structures2 : module {
  def point : struct
  {
    def x : ptr[int];
    def y : ptr[int];
  };

  def main : function()
  {
    def x : int;
    def y : int;
    x := 10;
    y := 5;
    def p : point;
    p.x := x~ptr;
    p.y := y~ptr;
    printf("x = %d, y = %d\n", p.x~cnt, p.y~cnt);
    // TODO: We need to support having a dereferenc on the left-hand side of an
    // assignment and then uncomment the following lines.
    //p.x~cnt := 6;
    //p.y~cnt := 3;
    //printf("x = %d, y = %d\n", x, y);
  }
};

run Structures2;

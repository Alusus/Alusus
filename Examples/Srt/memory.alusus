import "common.alusus";

def Main: module
{
  def start: function () => Void
  {
    def buf: ptr[Int[32]];
    buf = Srt.alloc(Int[32]~size * 10)~cast[ptr[Int[32]]];

    def i: Int[32];
    for i = 0, i < 10, ++i buf~cast[ptr[array[Int[32], 0]]]~cnt(i) = i * i;

    for i = 0, i < 10, ++i {
      Srt.print("Element %d: %d\n", i, buf~cast[ptr[array[Int[32], 0]]]~cnt(i));
    };

    Srt.free(buf);
  };
};

run Main.start;

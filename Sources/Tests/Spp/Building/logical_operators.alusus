import "libalusus_spp.so";

def Main: module
{
  def printf: @expname[printf] function (fmt: ptr[Word[8]], args: ...any)=>Int[64];

  def print: function (str: ptr[Word[8]]) => Void
  {
    printf("%s\n", str);
  };

  def main: function () => Void
  {
    testOr();
    testAnd();
    testMixed();
  };

  def testOr: function () => Void
  {
    def i: Int[32];
    def j: Int[32];
    def b: Word[1];

    i = 5;
    j = 10;
    b = 1;

    if i > 6 || j > 10 print("dual check");

    if i > 6  || b print("binary type check 1");
    if b || i > 6 print("binary type check 2");

    if i > 6 || j > 10 || b print("tripple check");

    b = i > 6 || j > 10;
    b = i > 6 || j > 10 || i == j;

    if i || j > 10 print("invalid type 1");
    if i > 6 || j print("invalid type 2");
  };

  def testAnd: function () => Void
  {
    def i: Int[32];
    def j: Int[32];
    def b: Word[1];

    i = 5;
    j = 10;
    b = 1;

    if i > 6 && j > 10 print("dual check");

    if i > 6  && b print("binary type check 1");
    if b && i > 6 print("binary type check 2");

    if i > 6 && j > 10 && b print("tripple check");

    b = i > 6 && j > 10;
    b = i > 6 && j > 10 && i == j;

    if i && j > 10 print("invalid type 1");
    if i > 6 && j print("invalid type 2");
  };

  def testMixed: function () => Void
  {
    def i: Int[32];
    def j: Int[32];

    i = 5;
    j = 10;

    if (i > 10 && j > 10) || (i < 5 && j < 5) print("Or of two ands.");
    if (i > 10 || j > 10) && (i < 5 || j < 5) print("And of two ors.");
  };
};

dump_llvm_ir Main;

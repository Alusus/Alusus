اشمل "مـتا/ذاكـرة.أسس"؛
اشمل "مـتم/طـرفية.أسس"؛

عرف رئـيسي: وحدة
{
    عرف ابدأ: دالة ()
    {
        عرف صوان: مؤشر[صـحيح]؛
        عرف س: صـحيح؛

        // اختبر "احجز".
        مـتم.طـرفية.اطبع("اختبار `احجز`:\ج")؛
        صوان = مـتا.ذاكـرة.احجز(صـحيح~حجم * 10)~مثل[مؤشر[صـحيح]]؛
        لكل س = 0، س < 10، ++س صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س) = س * 2؛
        لكل س = 0، س < 10، ++س {
            مـتم.طـرفية.اطبع("العنصر %d: %d\ج"، س، صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س))؛
        }؛

        // اختبر `أعد_الحجز`.
        مـتم.طـرفية.اطبع("\جاختبار `أعد_الحجز:\ج")؛
        صوان = مـتا.ذاكـرة.أعد_الحجز(صوان، صـحيح~حجم * 20)~مثل[مؤشر[صـحيح]]؛
        لكل س = 0، س < 20، ++س صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س) = س * 2؛
        لكل س = 0، س < 20، ++س {
            مـتم.طـرفية.اطبع("العنصر %d: %d\ج"، س، صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س))؛
        }؛

        مـتا.ذاكـرة.حرر(صوان)؛

        // اختبر `احجز_مرصوف`.
        مـتم.طـرفية.اطبع("\جاختبار `احجز_مرصوف`:\ج")؛
        صوان = مـتا.ذاكـرة.احجز_مرصوف(صـحيح~حجم، صـحيح~حجم * 10)~مثل[مؤشر[صـحيح]]؛
        لكل س = 0، س < 10، ++س صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س) = س * 2؛
        لكل س = 0، س < 10، ++س {
            مـتم.طـرفية.اطبع("العنصر %d: %d\ج"، س، صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س))؛
        }؛
        مـتا.ذاكـرة.حرر(صوان)؛

        // اختبر `اضبط` و `انسخ` و `قارن`.
        مـتم.طـرفية.اطبع("\جاختبار `اضبط` و `انسخ` و `قارن`:\ج")؛
        صوان = مـتا.ذاكـرة.احجز(صـحيح~حجم * 10)~مثل[مؤشر[صـحيح]]؛
        لكل س = 0، س < 10، ++س صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س) = س * 2؛
        عرف صوان2: مؤشر[صـحيح]؛
        صوان2 = مـتا.ذاكـرة.احجز(صـحيح~حجم * 10)~مثل[مؤشر[صـحيح]]؛
        مـتا.ذاكـرة.اضبط(صوان2، 0، صـحيح~حجم * 10)؛
        مـتم.طـرفية.اطبع("مقارنة مصفوفة بأصفار: %d\ج"، مـتا.ذاكـرة.قارن(صوان، صوان2، صـحيح~حجم * 10))؛
        مـتم.طـرفية.اطبع("مقارنة أصفار بمصفوفة: %d\ج"، مـتا.ذاكـرة.قارن(صوان2، صوان، صـحيح~حجم * 10))؛
        مـتا.ذاكـرة.انسخ(صوان2، صوان، صـحيح~حجم * 10)؛
        مـتم.طـرفية.اطبع("مقارنة مصفوفتين متطابقتين: %d\ج"، مـتا.ذاكـرة.قارن(صوان، صوان2، صـحيح~حجم * 10))؛
        مـتا.ذاكـرة.حرر(صوان)؛
        مـتا.ذاكـرة.حرر(صوان2)؛
    }؛
}؛

رئـيسي.ابدأ()؛

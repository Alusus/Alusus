اشمل "مـتم/ذاكـرة"؛
اشمل "مـتم/طـرفية"؛
استخدم مـتم؛

عرف رئـيسي: وحدة
{
    عرف ابدأ: دالة ()
    {
        عرف صوان: مؤشر[صـحيح]؛
        عرف س: صـحيح؛

        // اختبر "احجز".
        طـرفية.اطبع("اختبار `احجز`:\ج")؛
        صوان = ذاكـرة.احجز(صـحيح~حجم * 10)~مثل[مؤشر[صـحيح]]؛
        لكل س = 0، س < 10، ++س صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س) = س * 2؛
        لكل س = 0، س < 10، ++س {
            طـرفية.اطبع("العنصر %d: %d\ج"، س، صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س))؛
        }؛

        // اختبر `أعد_الحجز`.
        طـرفية.اطبع("\جاختبار `أعد_الحجز:\ج")؛
        صوان = ذاكـرة.أعد_الحجز(صوان، صـحيح~حجم * 20)~مثل[مؤشر[صـحيح]]؛
        لكل س = 0، س < 20، ++س صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س) = س * 2؛
        لكل س = 0، س < 20، ++س {
            طـرفية.اطبع("العنصر %d: %d\ج"، س، صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س))؛
        }؛

        ذاكـرة.حرر(صوان)؛

        // اختبر `احجز_مرصوف`.
        طـرفية.اطبع("\جاختبار `احجز_مرصوف`:\ج")؛
        صوان = ذاكـرة.احجز_مرصوف(صـحيح~حجم، صـحيح~حجم * 10)~مثل[مؤشر[صـحيح]]؛
        لكل س = 0، س < 10، ++س صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س) = س * 2؛
        لكل س = 0، س < 10، ++س {
            طـرفية.اطبع("العنصر %d: %d\ج"، س، صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س))؛
        }؛
        ذاكـرة.حرر(صوان)؛

        // اختبر `اضبط` و `انسخ` و `قارن`.
        طـرفية.اطبع("\جاختبار `اضبط` و `انسخ` و `قارن`:\ج")؛
        صوان = ذاكـرة.احجز(صـحيح~حجم * 10)~مثل[مؤشر[صـحيح]]؛
        لكل س = 0، س < 10، ++س صوان~مثل[مؤشر[مصفوفة[صـحيح]]]~محتوى(س) = س * 2؛
        عرف صوان2: مؤشر[صـحيح]؛
        صوان2 = ذاكـرة.احجز(صـحيح~حجم * 10)~مثل[مؤشر[صـحيح]]؛
        ذاكـرة.اضبط(صوان2، 0، صـحيح~حجم * 10)؛
        طـرفية.اطبع("مقارنة مصفوفة بأصفار: %d\ج"، ذاكـرة.قارن(صوان، صوان2، صـحيح~حجم * 10))؛
        طـرفية.اطبع("مقارنة أصفار بمصفوفة: %d\ج"، ذاكـرة.قارن(صوان2، صوان، صـحيح~حجم * 10))؛
        ذاكـرة.انسخ(صوان2، صوان، صـحيح~حجم * 10)؛
        طـرفية.اطبع("مقارنة مصفوفتين متطابقتين: %d\ج"، ذاكـرة.قارن(صوان، صوان2، صـحيح~حجم * 10))؛
        ذاكـرة.حرر(صوان)؛
        ذاكـرة.حرر(صوان2)؛
    }؛
}؛

رئـيسي.ابدأ()؛

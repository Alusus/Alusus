اشمل "مـتم/طـرفية"؛
اشمل "مـتم/نـص"؛
اشمل "الـقلب/بـيانات"؛

استخدم مـتم؛

دالة اطبع_بادئة (قياس: صحيح) {
    بينما قياس-- > 0 طـرفية.اطبع(" ")؛
}

دالة اطبع_شبم (كائن: سند[الـقلب.أسـاسيات.كـائن_بهوية]، بادئة: صحيح) {
    إذا كائن~مؤشر == 0 {
        طـرفية.اطبع("عدم\ج")؛
        ارجع؛
    }
    
    إذا كائن.أمشتق_من(الـقلب.أسـاسيات.نـص_بهوية.هات_هوية_الصنف()) {
        طـرفية.اطبع("نـص_بهوية \"%s\"\ج"، مثل_سند[كائن، الـقلب.أسـاسيات.نـص_بهوية].القيمة.صوان)؛
        ارجع؛
    } وإلا إذا كائن.أمشتق_من(الـقلب.أسـاسيات.صـحيح_بهوية.هات_هوية_الصنف()) {
        طـرفية.اطبع("صـحيح_بهوية %d\ج"، مثل_سند[كائن، الـقلب.أسـاسيات.صـحيح_بهوية].القيمة)؛
        ارجع؛
    } وإلا إذا كائن.أمشتق_من(الـقلب.أسـاسيات.طـبيعي_بهوية.هات_هوية_الصنف()) {
        طـرفية.اطبع("طـبيعي_بهوية %d\ج"، مثل_سند[كائن، الـقلب.أسـاسيات.طـبيعي_بهوية].القيمة)؛
        ارجع؛
    } وإلا إذا كائن.أمشتق_من(الـقلب.أسـاسيات.عـائم_بهوية.هات_هوية_الصنف()) {
        طـرفية.اطبع("عـائم_بهوية %f\ج"، مثل_سند[كائن، الـقلب.أسـاسيات.عـائم_بهوية].القيمة~مثل[عائم[64]])؛
        ارجع؛
    } وإلا إذا كائن.أمشتق_من(الـقلب.أسـاسيات.ثـنائي_بهوية.هات_هوية_الصنف()) {
        إذا مثل_سند[كائن، الـقلب.أسـاسيات.ثـنائي_بهوية].القيمة {
            طـرفية.اطبع("ثـنائي_بهوية صح\ج")؛
        } وإلا {
            طـرفية.اطبع("ثـنائي_بهوية خطأ\ج")؛
        }
        ارجع؛
    } وإلا إذا كائن.أمشتق_من(الـقلب.بـيانات.شـبم.مـعرف.هات_هوية_الصنف()) {
        طـرفية.اطبع("مـعرف %s\ج"، مثل_سند[كائن، الـقلب.بـيانات.شـبم.مـعرف].القيمة.القيمة.صوان)؛
        ارجع؛
    } وإلا إذا كائن.أمشتق_من(الـقلب.بـيانات.شـبم.نـص_حرفي.هات_هوية_الصنف()) {
        طـرفية.اطبع("نـص_حرفي %s\ج"، مثل_سند[كائن، الـقلب.بـيانات.شـبم.نـص_حرفي].القيمة.القيمة.صوان)؛
        ارجع؛
    } وإلا إذا كائن.أمشتق_من(الـقلب.بـيانات.شـبم.صـحيح_حرفي.هات_هوية_الصنف()) {
        طـرفية.اطبع("صـحيح_حرفي %s\ج"، مثل_سند[كائن، الـقلب.بـيانات.شـبم.صـحيح_حرفي].القيمة.القيمة.صوان)؛
        ارجع؛
    } وإلا إذا كائن.أمشتق_من(الـقلب.بـيانات.شـبم.مـحرف_حرفي.هات_هوية_الصنف()) {
        طـرفية.اطبع("مـحرف_حرفي %s\ج"، مثل_سند[كائن، الـقلب.بـيانات.شـبم.مـحرف_حرفي].القيمة.القيمة.صوان)؛
        ارجع؛
    } وإلا إذا كائن.أمشتق_من(الـقلب.بـيانات.شـبم.عـائم_حرفي.هات_هوية_الصنف()) {
        طـرفية.اطبع("عـائم_حرفي %s\ج"، مثل_سند[كائن، الـقلب.بـيانات.شـبم.عـائم_حرفي].القيمة.القيمة.صوان)؛
        ارجع؛
    }
    
    طـرفية.اطبع("%s.%s\ج"، كائن.هات_هويتي().مسار_الصنف.صوان، كائن.هات_هويتي().اسم_الصنف.صوان)؛
    
    عرف ع: طبيعي؛
    
    // طباعة الأعضاء
    عرف ربط: سند[الـقلب.بـيانات.ربـط](الـقلب.أسـاسيات.هات_وسيط[كائن، الـقلب.بـيانات.ربـط])؛
    إذا ربط~مؤشر != 0 {
        اطبع_بادئة(بادئة + 1)؛
        طـرفية.اطبع("الأعضاء:\ج")؛
        لكل ع = 0، ع < ربط.هات_عدد_الأعضاء()، ++ع {
            اطبع_بادئة(بادئة + 1)؛
            طـرفية.اطبع("-%s: "، ربط.هات_اسم_العضو(ع).صوان)؛
            اطبع_شبم(ربط.هات_عضوا(ع)، بادئة + 2)؛
        }
    }
    
    // طباعة عناصر مسماة
    عرف احتواء_تطبيقي: سند[الـقلب.بـيانات.احـتواء_تطبيقي](الـقلب.أسـاسيات.هات_وسيط[كائن، الـقلب.بـيانات.احـتواء_تطبيقي])؛
    إذا احتواء_تطبيقي~مؤشر != 0 {
        اطبع_بادئة(بادئة + 1)؛
        طـرفية.اطبع("عناصر مسماة:\ج")؛
        لكل ع = 0، ع < احتواء_تطبيقي.هات_عدد_العناصر()، ++ع {
            اطبع_بادئة(بادئة + 1)؛
            طـرفية.اطبع("-%s: "، احتواء_تطبيقي.هات_اسم_العنصر(ع).صوان)؛
            اطبع_شبم(احتواء_تطبيقي.هات_عنصرا(ع)، بادئة + 2)؛
        }
    }
    
    // طباعة عناصر
    عرف احتواء: سند[الـقلب.بـيانات.احـتواء](الـقلب.أسـاسيات.هات_وسيط[كائن، الـقلب.بـيانات.احـتواء])؛
    إذا احتواء~مؤشر != 0 && احتواء_تطبيقي~مؤشر == 0 {
        اطبع_بادئة(بادئة + 1)؛
        طـرفية.اطبع("عناصر:\ج")؛
        لكل ع = 0، ع < احتواء.هات_عدد_العناصر()، ++ع {
            اطبع_بادئة(بادئة + 1)؛
            طـرفية.اطبع("-")؛
            اطبع_شبم(احتواء.هات_عنصرا(ع)، بادئة + 2)؛
        }
    }
}

عرف ش: سند[الـقلب.أسـاسيات.كـائن_بهوية]؛
ش~مؤشر = (شبم ا، ب: (5، 6)، ت، @مشترك دالة د {})~مثل[مؤشر[الـقلب.أسـاسيات.كـائن_بهوية]]؛
اطبع_شبم(ش، 0)؛

